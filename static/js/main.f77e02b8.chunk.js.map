{"version":3,"sources":["components/item.js","components/list.js","components/items-context.js","components/status-context.js","components/autosavesatuts.js","components/editor.js","components/preview.js","components/panel.js","components/menu.js","libs/http.js","App.js","components/documentitle.js","index.js"],"names":["Item","item","actualIndex","index","onHandlePinned","onHandleSelectNote","className","onClick","e","handleSelectNote","title","substring","handlePinned","pinned","id","List","children","ItemsContext","React","createContext","onNew","onSearch","StatusContext","AutoSaveStatus","statuscode","Editor","onTitleChanged","onTextChanged","itemsContext","useContext","statusContext","onChange","autosave","value","text","Markdown","require","Preview","source","Panel","Menu","placeholder","post","url","data","a","fetch","method","headers","body","JSON","stringify","response","json","put","get","App","defaultValue","useState","items","setItems","copyItems","setCopyItems","setActualIndex","lock","setLock","status","setStatus","URL","res","getOrderedNotes","length","notes","note","uuid","created","Date","now","unshift","findIndex","x","console","log","sortByDate","arr","asc","sort","b","filter","rest","target","classList","contains","handleTitleChange","handleTextChange","i","setTimeout","useEffect","document","getItems","Provider","q","indexOf","save","map","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f77e02b8.chunk.js","sourcesContent":["\n\n\nexport default function Item({item, actualIndex, index, onHandlePinned, onHandleSelectNote}){\n\n\n    function handleSelectNote(item, e){\n        onHandleSelectNote(item, e);\n    }\n\n    function handlePinned(item, index){\n        onHandlePinned(item, index);\n    }\n\n    return (\n        <div key={item.id} \n            className={(index === actualIndex)? 'note activeNote': 'note'}\n            onClick={(e) => handleSelectNote(item, e)}>\n            <div>\n                {item.title === ''? '[Sin t√≠tulo]': item.title.substring(0,20)}\n            </div>\n            <div>\n                <button className=\"pinButton\" onClick={ () => handlePinned(item, index) }>\n                    {item.pinned? 'Pinned': 'Pin'}\n                </button>\n            </div>\n        </div>\n    )\n}","\n\nexport default function List({children}){\n    return (\n        <div>\n            {children}\n        </div>\n    )\n}","import React from 'react'\nconst ItemsContext = React.createContext({\n    onNew: ()=>{},\n    onSearch: ()=>{}\n});\n\nexport default ItemsContext;","import React from 'react'\nconst StatusContext = React.createContext(0);\n\nexport default StatusContext;","\n\nexport default function AutoSaveStatus({statuscode}){\n\n    return (\n        <div className=\"statusCodeContainer\">\n            {(statuscode === 0)? ' ':''}\n            {(statuscode === 1)? 'saving...':''}\n            {(statuscode === 2)? 'document saved üëç':''}\n        </div>\n    );\n}","\nimport React, {useContext} from 'react';\nimport ItemsContext from './items-context';\nimport StatusContext from './status-context';\nimport AutoSaveStatus from './autosavesatuts';\n\n\nexport default function Editor({item, onTitleChanged, onTextChanged}){\n\n    const itemsContext = useContext(ItemsContext);\n    const statusContext = useContext(StatusContext);\n\n    function handleTitleChange(e){\n        onTitleChanged(e);\n        itemsContext.autosave();\n    }\n\n    function handleTextChange(e){\n        onTextChanged(e);\n        itemsContext.autosave();\n    }\n\n    return (\n        <div className=\"editor\">\n            <AutoSaveStatus statuscode={statusContext} />\n            <div>\n              <input className=\"title\" onChange={handleTitleChange} value={ item.title } />\n            </div>\n\n            <div className=\"editor-textarea\">\n              <textarea className=\"content\" onChange={handleTextChange} value={ item.text }></textarea>\n            </div>\n        </div>\n    );\n}","var Markdown = require('react-remarkable');\n\nexport default function Preview({ text }){\n\n    return (\n        <div className=\"preview \">\n            <Markdown source={ text } />\n              <div></div>\n        </div>\n    );\n}","\n\nexport default function Panel({ children }){\n    return (\n        <div className=\"panel\">\n            {children}\n        </div>\n    );\n}","import React, {useContext} from 'react';\nimport ItemsContext from './items-context';\n\n\nexport default function Menu(){\n\n  const itemsContext = useContext(ItemsContext);\n\n  function handleClick(){\n    itemsContext.onNew();\n  }\n\n  function handleChange(e){\n    itemsContext.onSearch(e);\n  }\n\n    return (\n        <div className=\"menu\">\n          <input className=\"search\" onChange={handleChange} placeholder=\"buscar...\" />\n          <button className=\"btn\" onClick={ ()=> handleClick()} >+ Nueva nota</button>\n        </div>\n    );\n}","\n\nexport async function post(url, data){\n    const response = await fetch(url, {\n                        method: 'post', \n                        headers:{\n                          'content-type': 'application/json'\n                        },\n                        body: JSON.stringify(data)\n                      });\n    const json = await response.json();\n    return json;\n}\n\nexport async function put(url, data){\n    const response = await fetch(url, {\n                        method: 'put', \n                        headers:{\n                          'content-type': 'application/json'\n                        },\n                        body: JSON.stringify(data)\n                      });\n    const json = await response.json();\n    return json;\n}\n\nexport async function get(url){\n    const response = await fetch(url);\n    const json = await response.json();\n    return json;\n}","import './App.css';\nimport Item from './components/item';\nimport List from './components/list';\nimport Editor from './components/editor';\nimport Preview from './components/preview';\nimport useDocumentTitle from './components/documentitle';\nimport Panel  from './components/panel';\nimport Menu from './components/menu';\nimport { useEffect, useState, React } from 'react';\nimport uuid from 'react-uuid';\nimport ItemsContext from './components/items-context';\nimport StatusContext from './components/status-context';\nimport {get, post, put} from './libs/http';\n\n\n\nfunction App() {\n\n  const [items, setItems] = useState([]);\n  const [copyItems, setCopyItems] = useState([]);\n  const [actualIndex, setActualIndex] = useState(-1);\n  const [lock, setLock] = useState(false);\n  const [status, setStatus] = useState(0);\n\n  const URL = 'http://localhost:3010/';\n\n  useDocumentTitle(items[actualIndex]?.title, 'Notes');\n\n  useEffect( ()  => {\n    getItems();\n  }, []);\n\n  async function getItems(){\n    let data = await get(`${URL}`);\n    let res = getOrderedNotes(data);\n    setItems(res);\n    setCopyItems(res);\n    if(items.length > 0) setActualIndex(0);\n  }\n\n  async function handleNew(){\n    let notes = [...items];\n    const note = {\n      id: uuid(),\n      title: '',\n      text: '',\n      pinned: false,\n      created:Date.now()\n    }\n    \n    notes.unshift(note);\n\n    let res = getOrderedNotes(notes);\n    \n    setItems(res);\n    setCopyItems(res);\n\n    let index = res.findIndex(x => x.id == note.id);\n    setActualIndex(index);\n\n    const data = await post('http://localhost:3010/new', note);\n    console.log(data); \n  }\n\n  function sortByDate(arr, asc = false){\n\n    if(asc) return arr.sort( (a, b) => new Date(b.created) - new Date(a.created) && b.pinned);\n    return arr.sort( (a, b) => new Date(a.created) - new Date(b.created));\n  }\n\n  function getOrderedNotes(arr){\n    let items = [...arr];\n    let pinned = items.filter(x => x.pinned === true);\n    let rest = items.filter(x => x.pinned === false);\n\n    pinned = sortByDate(pinned, true);\n    rest = sortByDate(rest, true);\n\n    //setCopyItems(...pinned, ...rest);\n    return [...pinned, ...rest];\n  }\n\n\n  function handleSelectNote(item, e){\n    if(!e.target.classList.contains('note')) return;\n    const index = items.findIndex( (note) => note == item);\n    \n    setActualIndex(index);\n  }\n\n  function handleTitleChange(e){\n    const title = e.target.value;\n    let notes = [...items];\n\n    notes[actualIndex].title = title;\n\n    setItems(notes);\n  }\n\n  function handleTextChange(e){\n    const text = e.target.value;\n    let notes = [...items];\n\n    notes[actualIndex].text = text;\n\n    setItems(notes);\n  }\n\n  function handlePinned(item, i){\n    setActualIndex(i);\n    let id = item.id;\n    let notes = [...items];\n    notes[i].pinned = !notes[i].pinned;\n\n    let res = getOrderedNotes(notes);\n    \n    setItems(res);\n    setCopyItems(res);\n\n    let index = res.findIndex(x => x.id == id);\n\n    setActualIndex(index);\n  }\n\n  function handleSearch(e){\n\n    const q = e.target.value;\n\n    if(q === ''){\n      setCopyItems([...items]);\n    }else{\n      setCopyItems([...items]);\n\n      let res = copyItems.filter(x => x.title.indexOf(q) >= 0 || x.text.indexOf(q) >= 0);\n\n      if(res.length == 0){\n        setActualIndex(-1);\n      }else{\n        setCopyItems([...res]);\n        setActualIndex(0);\n      }\n\n    }\n  }\n\n  function autosave(){\n    console.log('autosave', lock);\n    if(!lock){\n      setLock(true);\n      setStatus(1);\n      setTimeout( () => {\n        save();\n        setLock(false);\n      }, 3000);\n    }\n  }\n\n  async function save(){\n    const item = items[actualIndex];\n\n    const response = await put(`${URL}update`, item);\n    \n    setStatus(2);\n\n    setTimeout(() => {\n      setStatus(0);\n    }, 1000);\n\n    console.log(response);\n  }\n\n  function renderEditorInterface(){\n    return(\n        <>\n          <StatusContext.Provider value={status}>\n            <Editor item={items[actualIndex]} onTitleChanged={ handleTitleChange } onTextChanged={ handleTextChange } />\n            <Preview text={ items[actualIndex].text } />\n          </StatusContext.Provider>\n        </>\n    );\n  }\n\n  function renderSideMenuInterface(){\n    return (\n        <Panel>\n          <Menu />\n          <List>\n          {\n            copyItems.map((item, i) => {\n              return <Item key={i} \n                          actualIndex={actualIndex} \n                          item={item} \n                          index={i} \n                          onHandlePinned={handlePinned} \n                          onHandleSelectNote={handleSelectNote} />\n            })\n          }\n         </List>\n        </Panel>\n    );\n  }\n\n  return (\n    <div className=\"App container\">\n      <ItemsContext.Provider value={{onNew: handleNew, onSearch: handleSearch, autosave:autosave}}>\n        {renderSideMenuInterface()}\n        {actualIndex >= 0? renderEditorInterface(): ''}\n      </ItemsContext.Provider>\n       \n    </div>\n  );\n}\n\nexport default App;","import { useEffect } from \"react\";\n\n\nexport default function useDocumentTitle(text, defaultValue){\n\n    useEffect( () => {\n        document.title = (text !== '')? text: defaultValue;\n    })\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}